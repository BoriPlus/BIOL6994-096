---
title: "Introduction to R for Biologists"
subtitle: "BIOL 4994/BIOL 4991 undegrads <br> BIOL 6994/BIOL 6997 grads"
author: "Alan J. Figueroa Ruiz"
date: "`r format(Sys.time(), '%Y-%b-%d, %I:%M %p')`"
output:
  prettydoc::html_pretty:
  theme: cayman
  highlight: github
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Examen 1
# Exam 1

### Loading libraries
```{r message=FALSE}
library(tidyverse)
library(dplyr)
library(aod)
```

### Asigning datasets as objets 
```{r eval=FALSE}
msleep <- glimpse(msleep)
storms <- storms
lizards <- lizards
```

### Datasets inspection
```{r eval=FALSE}
head(msleep)
head(storms)
head(lizards)
```

<br>

# __Ejercicio 1__

Use filter() to subset msleep to only animals who are awake for at least 12 hours of the day.
Usa filter() para seleccionar del dataset msleep solo los animales que están despiertos al menos 12 horas al día.

```{r}
msleep %>%
  filter(awake >= 12) #La columna awake es cuanto estan despiertos? Si es asi pues me voy con esta.
```

<br>

# __Ejercicio 2__

Use mutate() to create a new column called percent_day_awake that gives the percentage of the day that each species spends awake. Use select() with everything() at the end to verify your calculation.
Usa mutate() para crear una nueva columna llamada percent_day_awake que muestre el porcentaje del día que cada especie permanece despierta. Usa select() con everything() al final para comprobar que tus cálculos son correctos.

```{r}
msleep %>% 
  mutate(percent_day_awake = (awake / 24) * 100) %>% 
  select(percent_day_awake, awake, everything()) #La columna se quiere al principio para comprobar?
```

<br>

# __Ejercicio 3__

Use group_by() and summarise() to calculate the number of storms per year.
Agrupa los datos por año y calcula el número de tormentas que ocurrieron cada año.
Hint group_by(col) groups the rows by time, and summarise(num_storms = n()) counts how many rows (storms) there are per year.
Sugerencia: group_by(col) agrupa las filas por tiempo, y summarise(num_storms = n()) cuenta cuántas filas (tormentas) hay por año.

```{r}
storms %>%
  group_by(year) %>%
  summarise(num_storms = n())
```

<br>

# __Ejercicio 4__

Use filter() to subset storms to only storms with wind speeds greater than 50 knots, then use arrange() to sort by wind descending.
Filtra el dataset para quedarte solo con tormentas que tengan velocidad de viento mayor a 50 nudos, y luego ordénalas de mayor a menor velocidad de viento.

```{r}
storms %>% 
  filter(wind > 50) %>% 
  arrange(desc(wind))
```

<br>

# __Ejercicio 5__

Determine which Site and Diameter combination has the highest total grahami.
Determina cuál combinación de Sitio y Diámetro tiene el total de grahami más alto.

```{r message=FALSE}
lizards %>%
  group_by(Site, Diameter) %>%
  summarise(hightotal_grahami = sum(grahami)) %>%
  arrange(desc((hightotal_grahami)))
```

<br>

# __Ejercicio 6__

Identify which Time of day has the highest average opalinus count.
Identifica en qué Momento del día se registra el promedio más alto de opalinus.

```{r}
lizards %>%
  group_by(Time) %>%
  summarise(highavg_opalinus = mean(opalinus)) %>%
  arrange(desc(highavg_opalinus))
```




